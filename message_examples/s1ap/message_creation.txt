*** Settings ***
Library         Rammbock

*** Keywords ***
Add procedureCode
    [Arguments]  ${pc}
    Add Decimal As Octets  ${pc}  1

Add Criticality
    [Arguments]  ${criticality}
    Add Decimal As Octets  ${criticality}  1

Add value: S1SetupRequest
    Start S1SetupRequest
    Add id-Global-ENB-ID
    Add id-eNBname
    Add id-SupportedTAs
    Add id-DefaultPagingDRX

Start S1SetupRequest
    [Documentation]  TODO: check what is the meaning of these bytes.
    Add Hex Data  000004  3

Add id-Global-ENB-ID
    Add id  ${id-Global-ENB-ID}
    Add Criticality  0
    Add Global-ENB-ID value  262  12  00aad610

Add id
    [Arguments]  ${id}
    Add Decimal As Octets  ${id}  2

Add Global-ENB-ID value
    [Arguments]  ${Mobile Country Code}  ${Mobile Network Code}  ${macroENB-ID}
    Add Hex Data  00  1
    Add PLMNidentitity  ${Mobile Country Code}  ${Mobile Network Code}
    Add Hex Data  ${macroENB-ID}  4  # TODO: this has internal syntax, basicly a padded bit string. Make this smarter

Add id-eNBname
    Add id  ${id-eNBname}
    Add Criticality  1
    Add id-EBname value  Bonk13

Add id-EBname value
    [Arguments]  ${ENBname}
    Add Hex Data  ${eNBnam.extension presen bit: False}  1
    Add Hex Data  80  1  # TODO: what is the meaning of this? length most likely
    Add String  ${ENBname}

Add id-SupportedTAs
    Add id  ${id-SupportedTAs}
    Add Criticality  0
    Add Hex Data  19  1  # TODO: hard coded length.
    Add TA item  000040  262  12
    Add TA item  000080  262  12
    Add TA item  0000c0  262  12
    Add TA item  009500  262  12

Add PLMNidentitity
    [Arguments]  ${Mobile Country Code}  ${Mobile Network Code}
    Add Number As Tbcd  ${Mobile Country Code}
    Add Number As Tbcd  ${Mobile Network Code}

Add TA item
    [Arguments]  ${tAC}  ${Mobile Country Code}  ${Mobile Network Code}
    [Documentation]  TODO: tAC should be smarter (now its given as a hex string, should be given as actual value)
    Add Hex Data  ${tAC}  3
    Add PLMNidentitity  ${Mobile Country Code}  ${Mobile Network Code}

Add id-DefaultPagingDRX
    Add id  ${id-DefaultPagingDRX}
    Add Criticality  1
    Add PagingDRX: v32

Add PagingDRX: v32
    [Documentation]  TODO: Make this smarter
    Add Hex Data  0100  2

