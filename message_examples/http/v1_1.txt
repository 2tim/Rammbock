*** Settings ***
Library     Rammbock

*** Variables ***
${REQUEST VERSION}  HTTP/1.1
${CONNECTION}  keep-alive

*** Keywords ***
Set HTTP GET send
    # Headers
    Add String  GET  # Request Method
    Add String  ${SPACE}
    Add String  /  # Request URI
    Add String  ${SPACE}
    Add String  ${REQUEST VERSION}  # Request Version
    Add String  ${SPACE}
    Add String  \r\n
    # Information Elements
    Add String  Host: www.nokiasiemensnetworks.com
    Add String  \r\n
    Add String  Connection: ${CONNECTION}
    Add String  \r\n
    Add String  Cache-control: max-age=0
    Add String  \r\n
    Add String  User-agent: rammbock
    Add String  \r\n
    Add String  Accept: text/html
    Add String  \r\n
    Add String  \r\n

Set HTTP GET rcv
    # Headers
    ${request method}  Read String  delimiter=${SPACE}
    Set Test Variable  ${request method}
    ${request uri}  Read String  delimiter=${SPACE}
    Set Test Variable  ${request uri}
    ${request version}  Read String  delimiter=${SPACE}
    Set Test Variable  ${request version}
    # Information Elements
    Read String  delimiter=${SPACE}
    ${host}  Read String  delimiter=\r\n
    Set Test Variable  ${host}
    Read String  delimiter=${SPACE}
    ${connection}  Read String  delimiter=\r\n
    Set Test Variable  ${connection}
    Read String  delimiter=${SPACE}
    ${cache control}  Read String  delimiter=\r\n
    Set Test Variable  ${cache control}
    Read String  delimiter=${SPACE}
    ${user agent}  Read String  delimiter=\r\n
    Set Test Variable  ${user agent}
    Read String  delimiter=${SPACE}
    ${accept}  Read String  delimiter=\r\n
    Set Test Variable  ${accept}

Set HTTP Response send
    # Headers
    Add String  ${REQUEST VERSION}  # Request Version
    Add String  ${SPACE}
    Add String  200  # Response Code
    Add String  ${SPACE}
    Add String  \r\n
    # Information Elements
    Add String  Connection: ${CONNECTION}
    Add String  \r\n
    Add String  Content-Lenght: 218
    Add String  \r\n
    Add String  \r\n

Set HTTP Response rcv
    # Headers
    ${request version}=  Read String  delimiter=${SPACE}
    Set Test Variable  ${request version}
    ${response code}=  Read String  delimiter=${SPACE}
    Set Test Variable  ${response code}
    # Information Elements
    Read String  delimiter=${SPACE}
    ${connection}=  Read String  delimiter=\r\n
    Set Test Variable  ${connection}
    Read String  delimiter=${SPACE}
    ${content-lenght}=  Read String  delimiter=\r\n
    Set Test Variable  ${content-lenght}

