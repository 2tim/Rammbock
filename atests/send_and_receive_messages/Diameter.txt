*** Settings ***
Suite Setup     SCTP should be supported
Test Setup      SCTP client and server are initialized in port ${DIAMETER_PORT}
Test Teardown   Close Connections
Default Tags    no-ci  linux-only
Resource        ../../message_examples/diameter/0x01.txt
Resource        ../resources/server_client.txt

*** Variables ***
${DIAMETER_PORT}  3868

*** Test Cases ***
Capabilities-ExchangeRequest
    Create And Send Capabilities-ExchangeRequest
    Receive And Validate Capabilities-ExchangeRequest

Capabilities-ExchangeAnswer
    Create And Send Capabilities-ExchangeAnswer
    Receive And Validate Capabilities-ExchangeAnswer

3GPP-Authentication-InformationRequest
    Create And Send 3GPP-Authentication-InformationRequest
    Receive And Validate 3GPP-Authentication-InformationRequest

3GPP-Authentication-InformationAnswer
    Create And Send 3GPP-Authentication-InformationAnswer
    Receive And Validate 3GPP-Authentication-InformationAnswer

3GPP-Update-LocationRequest
    Create And Send 3GPP-Update-LocationRequest
    Receive And Validate 3GPP-Update-LocationRequest

3GPP-Update-LocationAnswer
    Create And Send 3GPP-Update-LocationAnswer
    Receive And Validate 3GPP-Update-LocationAnswer

Disconnect-PeerRequest
    Create And Send Disconnect-PeerRequest
    Receive And Validate Disconnect-PeerRequest

Disconnect-PeerAnswer
    Create And Send Disconnect-PeerAnswer
    Receive And Validate Disconnect-PeerAnswer

Diameter attach-detach?
    Create And Send Capabilities-ExchangeRequest
    Receive and Validate Capabilities-ExchangeRequest
    Respond With Capabilities-ExchangeAnswer
    Client Receives And Validates Capabilities-ExchangeAnswer
    Create And Send 3gpp-authentication-informationrequest
    Receive and validate 3gpp-authentication-informationrequest
    Respond with 3GPP-Authentication-InformationAnswer
    Client Receives and Validates 3GPP-Authentication-InformationAnswer
    Create And Send 3GPP-Update-LocationRequest
    Receive And Validate 3GPP-Update-LocationRequest
    Respond With 3GPP-Update-LocationAnswer
    Client Receives and validates 3GPP-Update-LocationAnswer
    Create And Send Disconnect-PeerRequest
    Receive and Validate disconnect-peerRequest
    Respond with Disconnect-PeerAnswer
    Client Receives and Validates Disconnect-peerAnswer

*** Keywords ***
Create And Send Capabilities-ExchangeRequest
    Reset Message
    Set Capabilities-ExchangeRequest
    Client Sends Data

Receive And Validate Capabilities-ExchangeRequest
    Server Receives Data
    Validate Capabilities-ExchangeRequest

Create And Send Capabilities-ExchangeAnswer
    Reset Message
    Set Capabilities-ExchangeAnswer
    Client Sends Data

Receive And Validate Capabilities-ExchangeAnswer
    Server Receives Data
    Validate Capabilities-ExchangeAnswer

Create And Send 3GPP-Authentication-InformationRequest
    Reset Message
    Set 3GPP-Authentication-InformationRequest
    Client Sends Data

Receive And Validate 3GPP-Authentication-InformationRequest
    Server Receives Data
    Validate 3GPP-Authentication-InformationRequest

Create And Send 3GPP-Authentication-InformationAnswer
    Reset Message
    Set 3GPP-Authentication-InformationAnswer
    Client Sends Data

Receive And Validate 3GPP-Authentication-InformationAnswer
    Server Receives Data
    Validate 3GPP-Authentication-InformationAnswer

Create And Send 3GPP-Update-LocationRequest
    Reset Message
    Set 3GPP-Update-LocationRequest
    Client Sends Data

Receive And Validate 3GPP-Update-LocationRequest
    Server Receives Data
    Validate 3GPP-Update-LocationRequest

Create And Send 3GPP-Update-LocationAnswer
    Reset Message
    Set 3GPP-Update-LocationAnswer
    Client Sends Data

Receive And Validate 3GPP-Update-LocationAnswer
    Server Receives Data
    Validate 3GPP-Update-LocationAnswer

Create And Send Disconnect-PeerRequest
    Reset Message
    Set Disconnect-PeerRequest
    Client Sends Data

Receive And Validate Disconnect-PeerRequest
    Server Receives Data
    Validate Disconnect-PeerRequest

Create And Send Disconnect-PeerAnswer
    Reset Message
    Set Disconnect-PeerAnswer
    Client Sends Data

Receive And Validate Disconnect-PeerAnswer
    Server Receives Data
    Validate Disconnect-PeerAnswer

Respond With Capabilities-ExchangeAnswer
    Reset Message
    Set Capabilities-ExchangeAnswer
    Server Sends Data

Client Receives And Validates Capabilities-ExchangeAnswer
    Client Receives Data
    Validate Capabilities-ExchangeAnswer

Respond with 3GPP-Authentication-InformationAnswer
    Reset Message
    Set 3GPP-Authentication-InformationAnswer
    Server Sends Data

Client Receives and Validates 3GPP-Authentication-InformationAnswer
    Client Receives Data
    Validate 3GPP-Authentication-InformationAnswer

Respond With 3GPP-Update-LocationAnswer
    Reset Message
    Set 3gpp-update-locationanswer
    Server Sends Data

Client Receives and validates 3GPP-Update-LocationAnswer
    Client Receives Data
    Validate 3gpp-update-locationanswer

Respond with Disconnect-PeerAnswer
    Reset Message
    Set Disconnect-PeerAnswer
    Server Sends Data

Client Receives and Validates Disconnect-peerAnswer
    Client Receives Data
    Validate Disconnect-PeerAnswer

