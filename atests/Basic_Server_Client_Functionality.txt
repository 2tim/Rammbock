*** Settings ***
Default Tags    regression
Library         ../src/Rammbock.py

*** Variables ***
${expected_string}  ismo_rulettaa
${host}  localhost
${port}  2010
${physical_interface}  lo

*** Test Cases ***
Send and Receive string over UDP using physical interface
    [Setup]  Initialize UDP Server and Client to physical interface
    Send String Over UDP
    Server Receives String Over UDP
    [Teardown]  Close Connections

Send and Receive string over UDP using virtual interface
    [Tags]
    [Setup]  Initialize UDP Client and Server to virtual interface
    Send String Over UDP
    Server Receives String Over UDP
    [Teardown]  Close Connections and remove virtual interface

*** Keywords ***
Server is started
    [Arguments]  ${interface}
    Start Server  LOCALHOST  ${interface}  ${port}

Server Receives String Over UDP
    ${rcv_string}=  receive_packet_over_udp
    Should Be Equal  ${rcv_string}  ${expected_string}

Connect to Server
    Rammbock.connect to server  ${host}  ${port}

Send string over UDP
    send packet over udp  ${expected_string}

Initialize UDP Server and Client to physical interface
    use interface  PHYSICAL  ${physical_interface}
    Server is Started  PHYSICAL
    Connect to Server

Close Connections
    Close Server
    Close Client

Initialize UDP Client and Server to virtual interface

