*** Variables ***
${EXPECTED_STRING}  ismo_rulettaa
${HOST}  localhost
${PORT}  3011
${PHYSICAL_INTERFACE}  ${LOOPBACK_DEVICE} 
${VIRTUAL_HOST}  1.1.1.1
${RECEIVED_STRING}  ${EMPTY}
${EXPECTED_MODIFIED_STRING}  ismo_rulettaa_koviten
 
*** Keywords ***

Client Tranfers Data
    client sends data  ${EXPECTED_STRING}

Server Gets Data
    ${RECEIVED_STRING}=  server receives data
    Set Test Variable  \${RECEIVED_STRING}  ${RECEIVED_STRING}
    Should Be Equal  ${RECEIVED_STRING}  ${EXPECTED_STRING}

Server Modifies Data
    Set Test Variable  \${RECEIVED_STRING}  ${RECEIVED_STRING}_koviten

Server Sends Modified Data
    server send packet over udp  ${RECEIVED_STRING}

Client Receives Data
    ${RECEIVED_STRING}=  client receive packet over udp
    Should Be Equal  ${RECEIVED_STRING}  ${EXPECTED_MODIFIED_STRING}

Server Receives packet
    ${data} =  server receives data
    Should be equal  ${data}  ${EXPECTED_STRING}

Server send packet
    server send packet over tcp  ${EXPECTED_MODIFIED_STRING}

Client receives packet
    ${data}=  client receive packet over tcp
    Should be equal  ${data}  ${EXPECTED_MODIFIED_STRING}
    
Send packet stream from Client to Server
    ${data}=   Evaluate   'ismo_rulettaa '* 3000
    log  ${data}
    client sends data  ${data}
    ${rcv_data}=  server receives data
    Should be equal  ${data}  ${rcv_data}
    
Send packet stream from Server to Client
    ${data}=   Evaluate   'robot rules, ok? '* 3000
    Server send packet over tcp  ${data}
    ${rcv_data}=  client receive packet over tcp
    Should be equal  ${data}  ${rcv_data}
