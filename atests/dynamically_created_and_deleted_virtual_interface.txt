*** Settings ***
Default Tags    regression
Library         ../src/Rammbock.py

*** Test Cases ***
Adding and Deleting virtual interface
    Given Rammbock allocates first virtual interface dynamically
    And new virtual interface is created
    When test case ends
    Then virtual interface is deleted

Adding and Deleting two dynamically allocated interfaces
    Given Rammbock allocates first virtual interface dynamically
    and Rammbock allocates second virtual interface dynamically
    and two virtual interfaces are created
    When test case ends
    Then two virtual interfaces are deleted

Use physical Interface
    Rammbock is using physical interface
    Then defined physical interface is used.

Try to Use Non Exitence Physical Interface
    [Tags]

Try to Create new virtual interface to non-exictence physical interface
    [Tags]  ${EMPTY}

*** Keywords ***
Rammbock allocates second virtual interface dynamically
    use_interface  TEST2  eth0  1.1.1.2  255.255.255.255  True

new virtual interface is created
    interface is up  TEST1

test case ends
    Log  "No test case here!"

virtual interface is deleted
    delete virtual interface  TEST1

delete virtual interface
    [Arguments]  @{INTERFACE_NAME}
    delete interface  @{INTERFACE_NAME}
    ${interface_state}=  is_interface_up  @{INTERFACE_NAME}
    Should Not Be True  ${interface_state}

two virtual interfaces are deleted
    delete virtual interface  TEST1
    delete virtual interface  TEST2

two virtual interfaces are created
    interface is up  TEST1
    interface is up  TEST2

interface is up
    [Arguments]  @{ifname}
    ${interface_state}=  is_interface_up  @{ifname}
    Should Be True  ${interface_state}

Rammbock allocates first virtual interface dynamically
    use_interface  TEST1  eth0  1.1.1.1  255.255.255.255  True

Rammbock is using physical interface
    use_interface  LOKAALI  lo

Then defined physical interface is used.
    is_interface_up  LOKAALI

