*** Settings ***
Test Setup      Create HTTP Get and Set it
Default Tags    regression
Library         rammbock.Rammbock
Resource        resources/Messaging.txt
Resource        ../protocols/http/v1_1.txt

*** Test Cases ***
Check Header
    ${header}=  Get Header  Request Method
    Should Be Equal  ${header}  GET

Check Information Element
    ${ie}=  Get Information Element  Host
    Should Be Equal  ${ie}  www.nokiasiemensnetworks.com

Check Sub Information Element
    [Tags]  ${EMPTY}
    ${ie}=  Get Information Element  nested.test
    Should Be Equal  ${ie}  test

Add Information Element
    Add Information Element  foobar  zig
    ${ie}=  Get Information Element  foobar
    Should Be Equal  ${ie}  zig

Add Sub Information Element
    [Tags]  ${EMPTY}
    Add Information Element  foo.bar  zig
    ${ie}=  Get Information Element  foo.bar
    Should Be Equal  ${ie}  zig

Add Header Field
    Add Header  host  localhost
    ${header}=  Get Header  host
    Should Be Equal  ${header}  localhost

Modify Header
    Modify Header Field  Request Version  HTTP/1.0
    ${header}=  Get Header  Request Version
    Should Be Equal  ${header}  HTTP/1.0

Try to Modify header Which does not exist
    [Tags]  ${EMPTY}

Modify Information Element
    Modify Information Element  Host  www.google.com
    ${ie}=  Get Information Element  Host
    Should Be Equal  ${ie}  www.google.com

Try to Modify Information Element Which Does not Exist.
    [Tags]  ${EMPTY}

Modify Sub Information Element
    [Tags]  ${EMPTY}
    Modify Information Element  nested.test  testing this out
    ${ie}=  Get Information Element  nested.test
    Should Be Equal  ${ie}  testing this out

Delete Information Element
    Delete Information Element  Host
    Run Keyword And Expect Error  *  Get Information Element  message

Delete Sub Information Element
    [Tags]  ${EMPTY}
    Delete Information Element  nested.test
    Run Keyword And Expect Error  *  Get Information Element  nested.test

Delete Header Field Which Exists
    Delete Header Field  Request Method
    Run Keyword And Expect Error  *  Get Header  Request Method

Try To Delete header field Which does not exist
    Run Keyword And Expect Error  *  Delete Header Field  protocal

Try to use unknown application protocol
    Run Keyword And Expect Error  (<type 'exceptions.ImportError'>, u"Unknown apllication protocol: 'foo' or version: 'bar'")  Create Message  foo  bar  http_get

Try to use unknown message type
    Run Keyword And Expect Error  (<type 'exceptions.KeyError'>, u"Unknown message type: 'foobar'")  Create Message  http  1_1  foobar

*** Keywords ***
Create HTTP Get and Set it
    Create Message
    Set HTTP GET send

