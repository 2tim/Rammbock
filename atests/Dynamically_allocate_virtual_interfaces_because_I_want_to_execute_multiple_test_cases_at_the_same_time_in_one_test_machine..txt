*** Settings ***
Default Tags    regression
Resource        interfaces.txt

*** Variables ***
${PHYSICAL_INTERFACE}  eth0

*** Test Cases ***
Adding and Deleting virtual interface
    Allocate first virtual interface dynamically
    Virtual interface is created
    Delete Virtual Interface  TEST1

Adding and Deleting two dynamically allocated interfaces
    Allocate first virtual interface dynamically
    Allocate second virtual interface dynamically
    and two virtual interfaces are created
    Then two virtual interfaces are deleted

Try to Create new virtual interface to non-exictence physical interface
    WHEN Try to create virtual interface to physical interface which does not exist
    THEN Exeption 'Creating new Virtual interface failed. Probably physical interface: foo' should occure

*** Keywords ***
Allocate second virtual interface dynamically
    create virtual interface  TEST2  ${PHYSICAL_INTERFACE}  1.1.1.2  255.255.255.255

Virtual interface is created
    interface is up  TEST1

virtual interface is deleted
    delete virtual interface  TEST1

delete virtual interface
    [Arguments]  ${virtual_interface}
    delete interface  ${virtual_interface}
    ${interface_state}=  is_interface_up  ${virtual_interface}
    Should Not Be True  ${interface_state}

two virtual interfaces are deleted
    delete virtual interface  TEST1
    delete virtual interface  TEST2

two virtual interfaces are created
    interface is up  TEST1
    interface is up  TEST2

Allocate first virtual interface dynamically
    create virtual interface  TEST1  ${PHYSICAL_INTERFACE}  1.1.1.1  255.255.255.255

WHEN Try to create virtual interface to physical interface which does not exist
    ${EXCEPTION}=  Run Keyword And Expect Error  *  create virtual Interface  WRONG_IF  foo  1.1.1.2  255.255.255.255
    Set Test Variable  ${EXCEPTION}

