*** Settings ***
Default Tags    regression
Library         rammbock.Rammbock
Resource        resources/data_transfer.txt
Resource        resources/server_client.txt
Test Setup      UDP Server and Client are initialized
Test Teardown   Close Connections

*** Variables ***

*** Test Cases ***
Send and Receive string over UDP using physical interface
    Client Tranfers Data
    Server Gets Data

Send data over UDP and modify it and return it back
    Client send data to server
    Server send Modified data pack to client

Send multiple packets over UDP to both ways
    Client send data to server
    Server send Modified data pack to client
    Client send data to server
    Server send Modified data pack to client

Try to bind server to network interface which does not exict
    Try to bind server to 'foo' interface
    Exeception "IOError: cannot bind server to interface: 'foo'" should raise

**** Keywords ***
Try to bind server to ${interface} interface
    ${error}=  Run Keyword And Expect Error  *  Start UDP Server  ${interface}  ${PORT}
    Set Test Variable  ${EXCEPTION}  ${error}

Exeception "${except}" should raise
    Should Be Equal  ${EXCEPTION}  ${except}

Client send data to server
    Client Tranfers Data
    Server Gets Data

Server send Modified data pack to client
    Server Modifies Data
    Server Sends Modified Data
    Client Gets Data
